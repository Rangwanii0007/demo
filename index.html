<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pro Ad Platform</title>
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body class="bg-gray-100 font-sans text-gray-700">

<!-- HEADER -->
<header class="bg-gray-900 text-white p-4 flex justify-between items-center shadow-lg sticky top-0 z-50">
  <h1 class="text-2xl font-bold">Pro Ad Platform</h1>
  <button id="loginBtn" class="bg-white text-gray-900 px-4 py-2 rounded hover:bg-gray-200">Login with Google</button>
</header>

<!-- MAIN CONTENT -->
<div class="container mx-auto p-4 space-y-4">

  <!-- Authenticated Dashboard -->
  <div id="dashboard" class="hidden bg-white rounded-lg shadow-lg p-6 max-w-5xl mx-auto space-y-4">
    <div class="flex justify-between items-center">
      <div>
        <h2 class="text-xl font-semibold mb-2">Welcome, <span id="userName" class="font-bold"></span></h2>
        <p class="mb-1">Email: <span id="userEmail"></span></p>
        <p class="mb-1">Coins: <span id="userCoins" class="text-green-500 font-semibold"></span></p>
        <p class="mb-1">Status: <span id="userStatus" class="font-semibold"></span></p>
      </div>
      <div class="flex space-x-2">
        <button id="earnCoinsBtn" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Watch Ad (+100 coins)</button>
        <button id="launchAdBtn" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Launch Ad</button>
      </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="flex flex-wrap gap-2 mt-4">
      <button class="w-full md:w-auto bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded" data-section="traffic">Traffic Ads</button>
      <button class="w-full md:w-auto bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded" data-section="youtube">YouTube Watch</button>
      <button class="w-full md:w-auto bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded" data-section="views">YouTube Views</button>
      <button class="w-full md:w-auto bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded" data-section="links">Direct Links</button>
      <button class="w-full md:w-auto bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded" data-section="profile">Profile Settings</button>
    </div>

    <!-- Sections -->
    <div class="mt-4">

      <!-- Traffic Ads -->
      <div id="section-traffic" class="hidden">
        <h3 class="text-lg font-semibold mb-2">Traffic Ads</h3>
        <button id="loadTrafficAds" class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded mb-2">Load Traffic Ads</button>
        <div id="trafficAdsContainer" class="grid grid-cols-1 md:grid-cols-3 gap-4"></div>
      </div>

      <!-- YouTube Watch -->
      <div id="section-youtube" class="hidden">
        <h3 class="text-lg font-semibold mb-2">Watch YouTube Video</h3>
        <button id="loadYoutube" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded mb-2">Watch Video (1 min)</button>
        <div id="youtubeContainer" class="mt-4"></div>
      </div>

      <!-- YouTube Views -->
      <div id="section-views" class="hidden">
        <h3 class="text-lg font-semibold mb-2">YouTube Views</h3>
        <button id="loadViews" class="bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded mb-2">Show Videos</button>
        <div id="viewsContainer" class="space-y-4"></div>
      </div>

      <!-- Direct Links -->
      <div id="section-links" class="hidden">
        <h3 class="text-lg font-semibold mb-2">Direct Links</h3>
        <button id="showLinks" class="bg-gray-700 hover:bg-gray-800 text-white px-4 py-2 rounded mb-2">Show Links</button>
        <div id="linksContainer" class="space-y-2"></div>
      </div>

      <!-- Profile Settings -->
      <div id="section-profile" class="hidden border-t pt-4 space-y-4">
        <h3 class="text-lg font-semibold mb-2">Profile Settings</h3>
        <label class="block mb-2">Name:
          <input type="text" id="profileName" class="w-full border rounded px-3 py-2" />
        </label>
        <label class="block mb-2 flex items-center space-x-2">
          <input type="checkbox" id="profilePremium" />
          <span>Premium User</span>
        </label>
        <button id="updateProfile" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded">Update Profile</button>
      </div>

    </div>
  </div>

  <!-- Login Prompt (before login) -->
  <div id="loginPrompt" class="max-w-xl mx-auto p-4 bg-white rounded-lg shadow-lg text-center hidden">
    <h2 class="text-xl font-semibold mb-4">Please Login to Continue</h2>
    <button id="loginGoogle" class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Login with Google</button>
  </div>

</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js"></script>

<script>
  // Initialize Firebase (replace with your config)
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    storageBucket: "YOUR_STORAGE_BUCKET",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  let currentUser = null;

  // Elements
  const loginBtn = document.getElementById('loginGoogle');
  const loginPrompt = document.getElementById('loginPrompt');
  const dashboard = document.getElementById('dashboard');

  const userNameSpan = document.getElementById('userName');
  const userEmailSpan = document.getElementById('userEmail');
  const userCoinsSpan = document.getElementById('userCoins');
  const userStatusSpan = document.getElementById('userStatus');

  const profileNameInput = document.getElementById('profileName');
  const profilePremiumCheckbox = document.getElementById('profilePremium');

  // Sections
  const sections = {
    traffic: document.getElementById('section-traffic'),
    youtube: document.getElementById('section-youtube'),
    views: document.getElementById('section-views'),
    links: document.getElementById('section-links'),
    profile: document.getElementById('section-profile')
  };

  // Show/hide sections
  document.querySelectorAll('button[data-section]').forEach(btn => {
    btn.onclick = () => {
      Object.values(sections).forEach(sec => sec.classList.add('hidden'));
      const target = btn.dataset.section;
      sections[target].classList.remove('hidden');
    };
  });

  // Login
  document.getElementById('loginGoogle').onclick = () => {
    const provider = new firebase.auth.GoogleAuthProvider();
    auth.signInWithPopup(provider).then(res => {
      currentUser = res.user;
      initializeUser();
    });
  };

  // Check auth state
  auth.onAuthStateChanged(user => {
    if (user) {
      currentUser = user;
      initializeUser();
    } else {
      loginPrompt.classList.remove('hidden');
      dashboard.classList.add('hidden');
    }
  });

  // Initialize user profile
  function initializeUser() {
    const userRef = db.collection('users').doc(currentUser.uid);
    userRef.get().then(doc => {
      if (!doc.exists) {
        userRef.set({
          name: currentUser.displayName,
          email: currentUser.email,
          coins: 500,
          status: 'Free',
          totalAdBudget: 0,
          youtubeWatchedMinutes: 0,
          lastLogin: new Date()
        }).then(loadDashboard);
      } else {
        loadDashboard();
      }
    });
  }

  // Load user data into dashboard
function loadDashboard() {
  document.getElementById('loginPrompt').classList.add('hidden');
  dashboard.classList.remove('hidden');

  const userRef = db.collection('users').doc(currentUser.uid);
  userRef.get().then(doc => {
    const data = doc.data();
    userNameSpan.innerText = data.name;
    userEmailSpan.innerText = data.email;
    userCoinsSpan.innerText = data.coins;
    userStatusSpan.innerText = data.status;
    profileNameInput.value = data.name;
    profilePremiumCheckbox.checked = data.status === 'Premium';
  });
}

// Coin reward for watching ad
document.getElementById('earnCoinsBtn').onclick = () => {
  alert('Watching ad...');
  const userRef = db.collection('users').doc(currentUser.uid);
  userRef.update({ coins: firebase.firestore.FieldValue.increment(100) }).then(loadDashboard);
};

// Launch ad with budget deduction
document.getElementById('launchAdBtn').onclick = () => {
  const budget = prompt('Enter ad budget (coins):', '1000');
  if (budget && !isNaN(budget)) {
    const userRef = db.collection('users').doc(currentUser.uid);
    userRef.update({ totalAdBudget: firebase.firestore.FieldValue.increment(parseInt(budget)) }).then(() => {
      alert('Ad launched with budget: ' + budget);
    });
  }
};

// Profile update
document.getElementById('updateProfile').onclick = () => {
  const newName = profileNameInput.value;
  const isPremium = profilePremiumCheckbox.checked;
  const status = isPremium ? 'Premium' : 'Free';
  const userRef = db.collection('users').doc(currentUser.uid);
  userRef.update({ name: newName, status: status }).then(() => {
    alert('Profile updated');
    loadDashboard();
  });
};

// Load Traffic Ads
document.getElementById('loadTrafficAds').onclick = () => {
  const container = document.getElementById('trafficAdsContainer');
  container.innerHTML = '';
  for (let i=0; i<3; i++) {
    const iframe = document.createElement('iframe');
    iframe.src = 'https://example.com'; // replace with actual ad URL
    iframe.className='w-full h-48 border rounded';
    container.appendChild(iframe);
  }
};

// Watch YouTube video
document.getElementById('loadYoutube').onclick = () => {
  const container = document.getElementById('youtubeContainer');
  container.innerHTML = '';
  const iframe = document.createElement('iframe');
  iframe.src='https://www.youtube.com/embed/Uw9bqrrV-yI?autoplay=1';
  iframe.width='560';
  iframe.height='315';
  iframe.allow='autoplay; encrypted-media';
  container.appendChild(iframe);
  // Add coins after 1 min
  setTimeout(() => {
    const userRef = db.collection('users').doc(currentUser.uid);
    userRef.update({ coins: firebase.firestore.FieldValue.increment(100) });
  }, 60000);
};

// Show links
document.getElementById('showLinks').onclick = () => {
  const container = document.getElementById('linksContainer');
  container.innerHTML = '';
  const links=['https://otieu.com/4/9677163','https://otieu.com/4/9677163'];
  links.forEach(link => {
    const a = document.createElement('a');
    a.href=link;
    a.target='_blank';
    a.innerText='Visit Link (200 coins)';
    a.className='block mb-2 text-blue-600 hover:underline';
    a.onclick=() => {
      if(confirm('Clicking this will deduct 200 coins. Continue?')){
        const userRef= db.collection('users').doc(currentUser.uid);
        userRef.update({ coins: firebase.firestore.FieldValue.increment(-200) });
      }
    };
    container.appendChild(a);
  });
};

</script>
</body>
</html>
