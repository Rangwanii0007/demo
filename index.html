<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ad4U — Free Ad Network</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    /* ─── Variables & Reset ───────────────────────────────────── */
    :root {
      --bg:#f4f7fc; --fg:#333; --accent:#3f51b5;
      --white:#fff; --radius:8px; --gap:1rem;
    }
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family:Segoe UI, sans-serif; background:var(--bg); color:var(--fg); line-height:1.5; }
    a { color:var(--accent); text-decoration:none; }
    a:hover { text-decoration:underline; }
    button { background:var(--accent); color:var(--white); border:none; padding:.6em 1.2em; border-radius:var(--radius); cursor:pointer; }
    button:disabled { opacity:.5; cursor:default; }
    input, select { padding:.5em; border:1px solid #ccc; border-radius:var(--radius); }
    h1,h2,h3 { margin-bottom:.5rem; }
    .container { max-width:1024px; margin:2rem auto; padding:0 var(--gap); }

    /* ─── Layout ─────────────────────────────────────────────── */
    nav { display:flex; gap:var(--gap); flex-wrap:wrap; margin-bottom:2rem; }
    section { background:var(--white); padding:var(--gap); border-radius:var(--radius); margin-bottom:var(--gap); }
    .flex { display:flex; gap:var(--gap); flex-wrap:wrap; }
    .iframe-grid { display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:1rem; margin-top:1rem; }
    .iframe-grid iframe { width:100%; height:180px; border:1px solid #ddd; border-radius:4px; }

    /* ─── Modal ──────────────────────────────────────────────── */
    .modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; align-items:center; justify-content:center; }
    .modal { background:var(--white); padding:2rem; border-radius:var(--radius); max-width:320px; text-align:center; }
    .modal-backdrop.show { display:flex; }
    .close-modal { position:absolute; top:1rem; right:1rem; background:none; font-size:1.2rem; cursor:pointer; }

    /* ─── Utility ───────────────────────────────────────────── */
    .hidden { display:none !important; }
    .mt { margin-top:var(--gap); }
  </style>
</head>
<body>
  <div class="container">
    <h1>Ad4U — Earn Coins by Watching Ads</h1>
    <!-- Dashboard + Launch -->
    <section>
      <h2>Dashboard</h2>
      <p>Your Coins: <strong id="coinCount">0</strong></p>
      <h3>Launch Your Ad</h3>
      <form id="launchForm" class="flex">
        <label>Type:
          <select id="adType">
            <option value="traffic">Website Traffic</option>
            <option value="watchtime">YouTube Watchtime</option>
            <option value="views">YouTube Views</option>
            <option value="direct">Direct Link</option>
          </select>
        </label>
        <label>Target URL / Video ID:
          <input type="text" id="adTarget" placeholder="http://... or Uw9bqrrV-yI" required>
        </label>
        <label>Budget (coins):
          <input type="number" id="adBudget" min="100" value="1000" required>
        </label>
        <button type="submit">Launch (15% fee)</button>
      </form>
    </section>

    <!-- Navigation -->
    <nav>
      <a href="#traffic">Website Traffic</a>
      <a href="#watchtime">YouTube Watchtime</a>
      <a href="#views">YouTube Views</a>
      <a href="#direct">Direct Links</a>
    </nav>

    <!-- 1. Website Traffic -->
    <section id="traffic">
      <h2>Website Traffic Ads</h2>
      <button id="singleT">Watch 1 Ad</button>
      <button id="multiT">Watch Multiple</button>
      <div id="promptT" class="mt hidden">
        <label>How many? <input id="countT" type="number" min="1" value="3"></label>
        <button id="startMultiT">Start</button>
      </div>
      <div id="iframesT" class="iframe-grid mt"></div>
    </section>

    <!-- 2. YouTube Watchtime -->
    <section id="watchtime">
      <h2>YouTube Watchtime Ads</h2>
      <button id="singleW">Watch 1 Video</button>
      <button id="multiW">Watch Multiple</button>
      <div id="promptW" class="mt hidden">
        <label>How many? <input id="countW" type="number" min="1" value="2"></label>
        <button id="startMultiW">Start</button>
      </div>
      <div id="iframesW" class="iframe-grid mt"></div>
    </section>

    <!-- 3. YouTube Views -->
    <section id="views">
      <h2>YouTube View Ads</h2>
      <button id="singleV">Watch 1 View</button>
      <button id="multiV">Watch Multiple</button>
      <div id="promptV" class="mt hidden">
        <label>How many? <input id="countV" type="number" min="1" value="4"></label>
        <button id="startMultiV">Start</button>
      </div>
      <div id="iframesV" class="iframe-grid mt"></div>
    </section>

    <!-- 4. Direct Links -->
    <section id="direct">
      <h2>Direct Link Ads</h2>
      <div id="linkContainer" class="mt flex"></div>
    </section>
  </div>

  <!-- Premium Modal -->
  <div id="premiumModal" class="modal-backdrop">
    <div class="modal">
      <button class="close-modal" onclick="closeModal()">×</button>
      <h3>Upgrade to Premium</h3>
      <p>Daily multi-watch limit reached. Get unlimited access by subscribing.</p>
      <a href="https://wa.me/923330737987" target="_blank">
        <button>Contact on WhatsApp</button>
      </a>
    </div>
  </div>

  <script>
  (()=>{
    // ─── Helpers & Data ──────────────────────────────────────
    const COIN_KEY='ad4u_coins', ADS_KEY='ad4u_ads', MULTI_KEY='ad4u_multi';
    let coins = +localStorage.getItem(COIN_KEY) || 0;
    let ads   = JSON.parse(localStorage.getItem(ADS_KEY) || '[]');
    let multi = JSON.parse(localStorage.getItem(MULTI_KEY) || '{}');

    function save(){ 
      localStorage.setItem(COIN_KEY, coins);
      localStorage.setItem(ADS_KEY, JSON.stringify(ads));
      localStorage.setItem(MULTI_KEY, JSON.stringify(multi));
      renderDashboard();
    }
    function renderDashboard(){
      document.getElementById('coinCount').textContent = coins;
    }
    function randomAd(type){
      const list = ads.filter(a=>a.type===type && a.budget>=getCost(type));
      return list.length? list[Math.floor(Math.random()*list.length)] : null;
    }
    function getCost(type){
      if(type==='traffic') return 100;
      if(type==='watchtime') return 100;
      if(type==='views') return 10;
      if(type==='direct') return 200;
      return 0;
    }
    function removeEmpty(){
      ads = ads.filter(a=>a.budget>=getCost(a.type));
    }

    // ─── Launch Ad ────────────────────────────────────────────
    document.getElementById('launchForm').onsubmit = e=>{
      e.preventDefault();
      let type   = e.target.adType.value;
      let target = e.target.adTarget.value.trim();
      let budget = Math.max(0, +e.target.adBudget.value * .85); // 15% fee
      if(!target||budget<getCost(type)) return alert('Invalid');
      ads.push({ id:Date.now(), type, target, budget });
      save();
      e.target.reset();
    };

    // ─── Multi Limit ──────────────────────────────────────────
    function canMulti(useSec){
      let today = new Date().toISOString().slice(0,10);
      if(multi.date!==today){ multi={date:today, used:0}; }
      if(multi.used+useSec>120) return false;
      multi.used += useSec;
      save();
      return true;
    }

    // ─── Single & Multi Watch Template ───────────────────────
    function watchAd(type, container){
      let ad = randomAd(type);
      if(!ad) return alert('No active ads');
      let cost = getCost(type);
      let frame = document.createElement('iframe');
      if(type==='traffic'){
        frame.src = ad.target;
      } else if(type==='watchtime'||type==='views'){
        let isVideo = type!=='traffic';
        let id = type==='direct'?ad.target:ad.target;
        frame.src = (type!=='traffic')
          ?`https://www.youtube.com/embed/${id}?autoplay=1&mute=1&controls=0`
          :ad.target;
      }
      container.innerHTML=''; container.appendChild(frame);
      let dur = type==='traffic'?30: (type==='watchtime'?60:30);
      let t=0, iv = setInterval(()=>{
        t++;
        if(t>=dur){
          clearInterval(iv);
          coins += cost;
          ad.budget -= cost;
          removeEmpty(); save();
          container.innerHTML='';
        }
      },1000);
    }

    function multiWatch(type, n, container){
      if(!canMulti( n*(type==='traffic'?30:(type==='watchtime'?60:30)) ))
        return showModal();
      container.innerHTML='';
      for(let i=0;i<n;i++){
        let slot = document.createElement('div');
        slot.style.position='relative'; slot.style.height='180px';
        let frame = document.createElement('iframe');
        frame.style.width='100%'; frame.style.height='100%'; frame.style.border='1px solid #ddd';
        let ad = randomAd(type);
        if(!ad) continue;
        if(type==='traffic') frame.src=ad.target;
        else frame.src = `https://www.youtube.com/embed/${ad.target}?autoplay=1&mute=1&controls=0`;
        slot.appendChild(frame);
        container.appendChild(slot);
        (()=>{
          let cost = getCost(type);
          let dur = type==='traffic'?30:(type==='watchtime'?60:30);
          let t=0, iv=setInterval(()=>{
            t++;
            if(t>=dur){
              clearInterval(iv);
              coins+=cost; ad.budget-=cost;
              removeEmpty(); save();
              slot.remove();
            }
          },1000);
        })();
      }
    }

    // ─── Direct Links ────────────────────────────────────────
    function renderDirect(){
      let out = document.getElementById('linkContainer');
      out.innerHTML='';
      ads.filter(a=>a.type==='direct'&&a.budget>=200).forEach(ad=>{
        let btn = document.createElement('button');
        btn.textContent = 'Open & Earn 200';
        btn.onclick = ()=>{
          window.open(ad.target,'_blank');
          setTimeout(()=>{
            coins+=200; ad.budget-=200; removeEmpty(); save();
            renderDirect();
          },15000);
        };
        out.appendChild(btn);
      });
    }

    // ─── Modal Controls ──────────────────────────────────────
    function showModal(){ document.getElementById('premiumModal').classList.add('show') }
    window.closeModal = ()=>{ document.getElementById('premiumModal').classList.remove('show') }

    // ─── Wire Up Buttons ─────────────────────────────────────
    document.getElementById('singleT').onclick = ()=>watchAd('traffic', document.getElementById('iframesT'));
    document.getElementById('multiT').onclick  = ()=>{ document.getElementById('promptT').classList.remove('hidden'); };
    document.getElementById('startMultiT').onclick = ()=>{
      let n=+document.getElementById('countT').value||1;
      multiWatch('traffic', n, document.getElementById('iframesT'));
      document.getElementById('promptT').classList.add('hidden');
    };

    document.getElementById('singleW').onclick = ()=>watchAd('watchtime', document.getElementById('iframesW'));
    document.getElementById('multiW').onclick  = ()=>{ document.getElementById('promptW').classList.remove('hidden'); };
    document.getElementById('startMultiW').onclick = ()=>{
      let n=+document.getElementById('countW').value||1;
      multiWatch('watchtime', n, document.getElementById('iframesW'));
      document.getElementById('promptW').classList.add('hidden');
    };

    document.getElementById('singleV').onclick = ()=>watchAd('views', document.getElementById('iframesV'));
    document.getElementById('multiV').onclick  = ()=>{ document.getElementById('promptV').classList.remove('hidden'); };
    document.getElementById('startMultiV').onclick = ()=>{
      let n=+document.getElementById('countV').value||1;
      multiWatch('views', n, document.getElementById('iframesV'));
      document.getElementById('promptV').classList.add('hidden');
    };

    // ─── Init ────────────────────────────────────────────────
    renderDashboard();
    renderDirect();
  })();
  </script>
</body>
</html>
